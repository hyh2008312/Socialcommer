<div id="xb-1-template-to-top" class="xb-template-2-edit">
  <form [formGroup]="storeTemplateForm" novalidate>
    <div class="xb-4-template-edit__cancel-save">
      <div class="xb-4-template-edit__nav-right" fxLayout="row" fxLayoutAlign="start center">
        <div class="xb-4-template-edit__button-1 md-margin-right-2" (click)="submitTemplate()">
          SAVE
        </div>
        <div class="xb-4-template-edit__button" (click)="close()">
          CANCEL
        </div>
      </div>
    </div>
    <div class="xb-4-template-edit__divider-line"></div>

    <!--1 home-->
    <div [hidden]="viewIndex != 0">
      <div class="xb-store-template__banner "
           [ngStyle]="{'background': 'url(' + (bannerImageStr) + ') center / auto 640px no-repeat' }">
        <div class="xb-store-template__template-mask"></div>
        <div class="xb-store-template__left" fxLayout="row" fxLayoutAlign="start center">
          <div class="xb-template-2-edit__store-name">
            {{nameTag}}
          </div>
          <app-store-template-edit-2-navigation fxFlex [navigationIndex]="viewIndex"
                                                (openCart)="openStoreCart()"
                                                (openOrder)="openStoreOrder()"
                                                [isHavePromotion]="isHavePromotion"
                                                (routerChange)="changeViewIndex($event)"></app-store-template-edit-2-navigation>
        </div>
        <div class="xb-store__content-2">

          <div class="xb-template-2-edit__store-title xb-template-2-edit__edit-border">
            <quill-editor formControlName="titleTag" [(ngModel)]="titleTag"
                          (ready)="getTitleInputEdit($event)"
                          [options]="editorConfig"></quill-editor>
            <div class="xb-template-2-edit__edit-text-button" (click)="editTitleInput()">
              CLICK TO EDIT TEXT
            </div>
          </div>

          <div class="xb-template-2-edit__store-description xb-template-2-edit__edit-border">
            <quill-editor formControlName="descriptionTag" [(ngModel)]="descriptionTag"
                          (ready)="getDesInputEdit($event)"
                          [options]="editorConfig"></quill-editor>
            <div class="xb-template-2-edit__edit-text-button" (click)="editDesInput()">
              CLICK TO EDIT TEXT
            </div>
          </div>
        </div>
        <div class="xb-store-template__store-buttons" fxShow="false" fxShow.gt-xs="true">
          <span>Shop Now</span>
          <br>
          <i class="material-icons">keyboard_arrow_down</i>
        </div>
        <div class="xb-template-2-edit__edit-button" (click)="editImage()">
          CLICK TO CHANGE IMAGE
        </div>
      </div>

      <!--商家信息介绍-->
      <div class="xb-store-template__introduce">
        <div class="xb-store-template__introduce-one" fxLayout="row" fxLayoutAlign="start start">
          <div class="xb-store-template__introduce-one-top-left">
            <div class="xb-store-template__introduce-one-describe xb-template-2-edit__edit-border">
              <quill-editor formControlName="aboutMeTag" [(ngModel)]="aboutMeTag"
                            (ready)="getAboutMeInputEdit($event)"
                            [options]="editorConfig"></quill-editor>
              <div class="xb-template-2-edit__edit-text-button" (click)="editAboutMeInput()">
                CLICK TO EDIT TEXT
              </div>
            </div>
          </div>
          <div class="xb-store-template__introduce-one-top-right">
            <div class="xb-store-template__introduce-one-top-image xb-template-2-edit__edit-border"
                 [ngStyle]="{'background': 'url(' + (aboutMeOneImageStr) + ') center / 100% 100% ' }">
              <app-image-upload-preview-two-template [(previewImgFile)]="aboutMeOneImageStr"
                                                     [(previewImgSrc)]="aboutMeOneImageStr"
                                                     [type]="uploadAboutType"></app-image-upload-preview-two-template>
              <div class="xb-template-2-edit__image-position xb-template-2-edit__edit-border">
                <app-image-upload-preview-two-template [(previewImgFile)]="aboutMeTwoImageStr"
                                                       [(previewImgSrc)]="aboutMeTwoImageStr"
                                                       [type]="uploadAboutType"></app-image-upload-preview-two-template>
              </div>

            </div>
          </div>
        </div>
        <div class="xb-store-template__introduce-two" fxLayout="row" fxLayoutAlign="end start">
          <div class="xb-store-template__introduce-two-bottom-left">
            <div class="xb-store-template__introduce-two-bottom-image xb-template-2-edit__edit-border"
                 [ngStyle]="{'background': 'url(' + (homeMadeOneImageStr) + ') center / auto 100% ' }">
              <app-image-upload-preview-two-template [(previewImgFile)]="homeMadeOneImageStr"
                                                     [(previewImgSrc)]="homeMadeOneImageStr"
                                                     [type]="uploadAboutType"></app-image-upload-preview-two-template>
              <div class="xb-template-2-edit__image-home-position xb-template-2-edit__edit-border">
                <app-image-upload-preview-two-template [(previewImgFile)]="homeMadeTwoImageStr"
                                                       [(previewImgSrc)]="homeMadeTwoImageStr"
                                                       [type]="uploadAboutType"></app-image-upload-preview-two-template>
              </div>
            </div>

          </div>


          <div class="xb-store-template__introduce-two-bottom-right">
            <div class="xb-store-template__introduce-two-describe xb-template-2-edit__edit-border">
              <quill-editor formControlName="homeMadeDesTag" [(ngModel)]="homeMadeDesTag"
                            (ready)="getHomeMadeDesInputEdit($event)"
                            [options]="editorConfig"></quill-editor>
              <div class="xb-template-2-edit__edit-text-button" (click)="editHomeMadeDesInput()">
                CLICK TO EDIT TEXT
              </div>
            </div>
          </div>

        </div>
      </div>
      <!--home-made-->
      <div class="xb-store-template__home-made xb-template-2-edit__edit-border"
           [ngStyle]="{'background': 'url(' + imageHomeMade + ') center / 1920px auto no-repeat' }">
        <div class="xb-store-template__template-mask"></div>

        <div class="xb-store-template__home-made-title xb-template-2-edit__edit-border">
          <quill-editor formControlName="homeMadeTitle" [(ngModel)]="homeMadeTitle"
                        (ready)="getHomeMadeTitleInputEdit($event)"
                        [options]="editorConfig"></quill-editor>
          <div class="xb-template-2-edit__edit-text-button" (click)="editHomeMadeTitleInput()">
            CLICK TO EDIT TEXT
          </div>
        </div>
        <div class="xb-template-2-edit__edit-button" (click)="editImageHomeMade()">
          CLICK TO CHANGE IMAGE
        </div>
      </div>

      <!--产品列表-->
      <div class="xb-store-template__product-content ">
        <div class="md-margin-top-2" fxLayout="row wrap" fxLayoutAlign="space-between start">
          <ng-container *ngFor="let item of product ; let i=index">
            <app-store-item-card-edit
              *ngIf="i<6"
              fxFlex.xs="48" fxFlex.gt-xs="30"
              (productId)="jumpGoodsDetail($event)"
              [product]="item" [status]="0"></app-store-item-card-edit>
          </ng-container>
          <div fxFlex.xs="48" fxFlex.gt-xs="30"></div>
        </div>
        <div class="xb-store-template__buttons-bg" fxLaout="row" fxLayoutAlign="center center"
             (click)="jumpProductList()" *ngIf="product.length!=0">
          <div>
            SEE MORE
          </div>
        </div>

        <div class="xb-store-template__collection-no-goods" *ngIf="product.length == 0">
          <div>You haven't added any affiliate products yet.</div>
          <div class="xb-store-template__jump-button" fxLaout="row" fxLayoutAlign="center center"
          >
            <a routerLink="/shop/listings/items" target="_blank">
              Add Your First Product
            </a>
          </div>
        </div>

      </div>
      <div>
        <app-store-template-edit-2-store-foot [storeName]="nameTag"></app-store-template-edit-2-store-foot>
      </div>
    </div>
    <!--2 flash sale-->
    <div [hidden]="viewIndex != 1">
      <div class="xb-template-2-edit__100vh" fxLayout="row" fxLayoutAlign="start stretch">
        <div fxFlex fxLayout="column">
          <!--头部消息-->
          <div class="xb-template-2-edit__container">
            <div class="xb-store-template__collection-container" fxShow="true" fxShow.xs="false">
              <div class="xb-store-template__left" fxLayout="row" fxLayoutAlign="start center">
                <div class="xb-template-2-edit__store-name" [ngStyle]="{'color':'black'}">
                  {{nameTag}}
                </div>
                <app-store-template-edit-2-navigation [navigationIndex]="viewIndex" [isBlack]="true"
                                                      (openCart)="openStoreCart()"
                                                      (openOrder)="openStoreOrder()"
                                                      [isHavePromotion]="isHavePromotion"
                                                      (routerChange)="changeViewIndex($event)"
                                                      fxFlex></app-store-template-edit-2-navigation>
              </div>
            </div>

            <div class="xb-store-template__collection-title">
              Flash Sale
            </div>
          </div>
          <!--产品列表-->
          <div class="xb-store-template__collection—product" fxFlex="noshrink">
            <div>
              <div class="xb-store-template__list-products md-margin-top-1">
                <div fxLayout="row wrap" fxLayoutAlign="space-between start">
                  <app-edit-flase-sale-card-2 *ngFor="let item of flashSaleProduct"
                                              fxFlex.xs="48" fxFlex.gt-xs="30"
                                              (productId)="jumpGoodsDetail($event)"
                                              [product]="item" [status]="1"></app-edit-flase-sale-card-2>
                  <div fxFlex.xs="48" fxFlex.gt-xs="30"></div>
                </div>
              </div>
            </div>
          </div>
          <!--网页底部-->
          <div>
            <app-store-template-edit-2-store-foot [storeName]="nameTag"></app-store-template-edit-2-store-foot>
          </div>
        </div>
      </div>
    </div>
    <!--2 products-->
    <div [hidden]="viewIndex != 2">
      <div class="xb-template-2-edit__100vh" fxLayout="row" fxLayoutAlign="start stretch">
        <div fxFlex fxLayout="column">
          <!--头部消息-->
          <div class="xb-template-2-edit__container">
            <div class="xb-store-template__collection-container" fxShow="true" fxShow.xs="false">
              <div class="xb-store-template__left" fxLayout="row" fxLayoutAlign="start center">
                <div class="xb-template-2-edit__store-name" [ngStyle]="{'color':'black'}">
                  {{nameTag}}
                </div>
                <app-store-template-edit-2-navigation [navigationIndex]="viewIndex" [isBlack]="true"
                                                      (openCart)="openStoreCart()"
                                                      (openOrder)="openStoreOrder()"
                                                      [isHavePromotion]="isHavePromotion"
                                                      (routerChange)="changeViewIndex($event)"
                                                      fxFlex></app-store-template-edit-2-navigation>
              </div>
            </div>

            <div class="xb-store-template__collection-title">
              Products
            </div>
          </div>
          <!--产品列表-->
          <div class="xb-store-template__collection—product" fxFlex="noshrink">
            <div class="xb-store-template__collection—category" fxLayout="column" fxLayoutAlign="start start"
                 fxShow="true"
                 fxShow.xs="false">
              <app-store-template-edit-2-category fxFlexAlign="center" [(category)]="category" [categories]="categories"
                                                  (categoryChange)="changeCategory()"></app-store-template-edit-2-category>
            </div>
            <div>
              <div class="xb-store-template__list-products md-margin-top-1">
                <div fxLayout="row wrap" fxLayoutAlign="space-between start">
                  <app-store-item-card-edit *ngFor="let item of product"
                                            fxFlex.xs="48" fxFlex.gt-xs="30"
                                            (productId)="jumpGoodsDetail($event)"
                                            [product]="item" [status]="1"></app-store-item-card-edit>
                  <div fxFlex.xs="48" fxFlex.gt-xs="30"></div>
                </div>
              </div>
            </div>
            <div class="xb-store-template__collection-no-goods" *ngIf="product.length == 0">
              <div>You haven't added any affiliate products yet.</div>
              <div class="xb-store-template__jump-button" fxLaout="row" fxLayoutAlign="center center"
              >
                <a routerLink="/shop/listings/items" target="_blank">
                  Add Your First Product
                </a>
              </div>
            </div>
          </div>
          <!--网页底部-->
          <div>
            <app-store-template-edit-2-store-foot [storeName]="nameTag"></app-store-template-edit-2-store-foot>
          </div>
        </div>
      </div>
    </div>
    <!--3 about me -->
    <div [hidden]="viewIndex != 3">
      <div class="xb-template-2-edit__100vh" fxLayout="row" fxLayoutAlign="start stretch">
        <div fxFlex fxLayout="column">
          <div class="xb-template-2-edit__container">
            <div class="xb-store-template__collection-container" fxShow="true" fxShow.xs="false">
              <div class="xb-store-template__left" fxLayout="row" fxLayoutAlign="start center">

                <div class="xb-template-2-edit__store-name" [ngStyle]="{'color':'black'}">
                  {{nameTag}}
                </div>
                <app-store-template-edit-2-navigation [navigationIndex]="viewIndex" [isBlack]="true"
                                                      (openCart)="openStoreCart()"
                                                      (openOrder)="openStoreOrder()"
                                                      [isHavePromotion]="isHavePromotion"
                                                      (routerChange)="changeViewIndex($event)"
                                                      fxFlex></app-store-template-edit-2-navigation>
              </div>
            </div>

            <div class="xb-store-template__collection-title">
              About Me
            </div>
          </div>
          <div class="xb-store-template__about-bg" fxFlex="noshrink">
            <div class="xb-store-template__about-image-bg xb-template-2-edit__edit-border">
              <app-image-upload-preview-blog [(previewImgFile)]="aboutMeCover" [(previewImgSrc)]="aboutMeCover"
                                             [type]="uploadAboutType"></app-image-upload-preview-blog>
            </div>
            <div class="xb-store-template__introduce-one-describe xb-template-2-edit__edit-border">
              <quill-editor formControlName="aboutMeNewTag" [(ngModel)]="aboutMeNewTag"
                            (ready)="getAboutMeNewInputEdit($event)"
                            [options]="editorConfig"></quill-editor>
              <div class="xb-template-2-edit__edit-text-button" (click)="editAboutMeNewInput()">
                CLICK TO EDIT TEXT
              </div>
            </div>
          </div>
          <!--网页底部-->
          <div>
            <app-store-template-edit-2-store-foot [storeName]="nameTag"></app-store-template-edit-2-store-foot>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>
<div class="xb-template-2-edit__background" *ngIf="imageEdited">
  <div class="xb-store-template__detail-image-close" (click)="editImage()">
    <i class="iconfontXberts icon-ic-close"></i>
  </div>
  <div class="xb-store-template__detail">
    <div class="xb-template-2-edit__mobile-dialog-inner">
      <app-image-upload-preview [(previewImgFile)]="bannerImageStr"
                                (previewImgFileChange)="editImage()"></app-image-upload-preview>
    </div>
  </div>
</div>
<div class="xb-template-2-edit__background" *ngIf="imageHomeMadeEdited">
  <div class="xb-store-template__detail-image-close" (click)="editImageHomeMade()" fxShow="false" fxShow.gt-sm="true">
    <i class="iconfontXberts icon-ic-close"></i>
  </div>
  <div class="xb-store-template__detail">
    <div class="xb-template-2-edit__mobile-dialog-inner">
      <app-image-upload-preview [(previewImgFile)]="imageHomeMade" [ratio]="ratio"
                                (previewImgFileChange)="editImageHomeMade()"></app-image-upload-preview>
    </div>
  </div>
</div>
<div class="xb-template-2-edit__background" *ngIf="storeEdited">
  <div class="xb-store-template__detail-image-close" (click)="editStore()" fxShow="false" fxShow.gt-sm="true">
    <i class="iconfontXberts icon-ic-close"></i>
  </div>
  <div class="xb-store-template__detail">
    <div class="xb-template-2-edit__mobile-dialog-inner">
      <div class="xb-template-2-edit__title-1">
        Ready to Publish?
      </div>
      <div class="xb-template-2-edit__content-1">
        Make sure all these setting are correct before your store goes live!
      </div>
      <form [formGroup]="storeForm" novalidate>
        <div class="md-margin-top-2 md-margin-right-2" fxLayout="column">
          <div class="md-dark-secondary">
            Store Name
          </div>
          <mat-form-field>
            <input matInput formControlName="name">
          </mat-form-field>
          <div *ngIf="formErrors['name']" class="xb-input-error">
            {{ formErrors['name'] }}
          </div>
          <div class="md-dark-secondary">
            Store Description (Used for social media sharing and search optimization)
          </div>
          <mat-form-field class="xb-template-2-edit__width-100">
            <textarea matInput formControlName="description"></textarea>
          </mat-form-field>
          <div *ngIf="formErrors['description']" class="xb-input-error">
            {{ formErrors['description'] }}
          </div>
          <div class="md-dark-secondary">
            Your Store URL
          </div>
          <div class="md-margin-bottom-1" fxLayout="row" fxLayoutAlign="start center">
            <div>
              https://www.socialcommer.com/store/
            </div>
            <mat-form-field class="md-margin-left-2 xb-shop__width-1">
              <input matInput formControlName="displayName">
            </mat-form-field>
          </div>
          <div *ngIf="formErrors['displayName']" class="xb-input-error">
            {{ formErrors['displayName'] }}
          </div>
          <div class="xb-template-2-edit__margin-top-48" fxLayout="row" fxLayoutAlign="start center">
            <button mat-raised-button color="primary" (click)="changeStore()">PUBLISH</button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
<div *ngIf="goodsDetail">
  <app-store-template-2-store-edit-detail [productId]="selectProductId"
                                          (closeDetail)="changeGoodsDetail()">
  </app-store-template-2-store-edit-detail>
</div>
<div class="xb-template-2-edit__background" *ngIf="storeCart" [ngStyle]="{'background-color':'white'}">
  <div class="xb-4-template-edit__cancel-save">
    <div class="xb-4-template-edit__nav-right" fxLayout="row" fxLayoutAlign="start center">
      <div class="xb-4-template-edit__button-1 md-margin-right-2" (click)="submitTemplate()">
        SAVE
      </div>
      <div class="xb-4-template-edit__button" (click)="close()">
        CANCEL
      </div>
    </div>
  </div>
  <div class="xb-4-template-edit__divider-line"></div>
  <app-edit-cart-main-2 [storeName]="nameTag" (closeStoreCart)="jumpStoreCart()"
                        (openStoreOrder)="openStoreOrder()"></app-edit-cart-main-2>
</div>
<div class="xb-template-2-edit__background" *ngIf="storeOrder" [ngStyle]="{'background-color':'white'}">
  <div class="xb-4-template-edit__cancel-save">
    <div class="xb-4-template-edit__nav-right" fxLayout="row" fxLayoutAlign="start center">
      <div class="xb-4-template-edit__button-1 md-margin-right-2" (click)="submitTemplate()">
        SAVE
      </div>
      <div class="xb-4-template-edit__button" (click)="close()">
        CANCEL
      </div>
    </div>
  </div>
  <div class="xb-4-template-edit__divider-line"></div>
  <app-edit-2-order [storeName]="nameTag" (closeStoreOrder)="jumpStoreOrder()"
                    (openStoreCart)="openStoreCart()"></app-edit-2-order>
</div>

